<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>üìñ Quran Explorer - Shoib&#x27;s Space</title><meta name="description" content="The digital home of Shoib‚Äôs thoughts, projects, and passions."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://www.shoib.me/quran-explorer/"><link rel="alternate" type="application/atom+xml" href="https://www.shoib.me/feed.xml" title="Shoib&#x27;s Space - RSS"><link rel="alternate" type="application/json" href="https://www.shoib.me/feed.json" title="Shoib&#x27;s Space - JSON"><meta property="og:title" content="üìñ Quran Explorer"><meta property="og:image" content="https://www.shoib.me/media/website/icons8-swot-analysis-400.png"><meta property="og:image:width" content="400"><meta property="og:image:height" content="400"><meta property="og:site_name" content="Shoib's Space"><meta property="og:description" content="The digital home of Shoib‚Äôs thoughts, projects, and passions."><meta property="og:url" content="https://www.shoib.me/quran-explorer/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://www.shoib.me/media/website/icons8-swot-analysis-50-3.png" type="image/png"><link rel="preload" href="https://www.shoib.me/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://www.shoib.me/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://www.shoib.me/assets/css/style.css?v=2e46e1f2fc98a3dc054c47a693e5312f"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.shoib.me/quran-explorer/"},"headline":"üìñ Quran Explorer","datePublished":"2025-05-27T22:15+05:00","dateModified":"2025-06-01T21:54+05:00","image":{"@type":"ImageObject","url":"https://www.shoib.me/media/website/icons8-swot-analysis-400.png","height":400,"width":400},"description":"The digital home of Shoib‚Äôs thoughts, projects, and passions.","author":{"@type":"Person","name":"Muhammad Shoib","url":"https://www.shoib.me/authors/muhammad-shoib/"},"publisher":{"@type":"Organization","name":"Muhammad Shoib","logo":{"@type":"ImageObject","url":"https://www.shoib.me/media/website/icons8-swot-analysis-400.png","height":400,"width":400}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.extlink::after {
				background-color: currentColor;
				content: "";
				display: inline-block;
				height: 16px;
				margin-left: 5px;
				position: relative;
				top: 0px;
				width: 16px;
			}
		
					.extlink.extlink-icon-1::after {
						mask-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' stroke='%23000000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'><path d='M15 3h6v6'/><path d='M10 14 21 3'/><path d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'/></svg>");
						mask-repeat: no-repeat;
						mask-size: contain;
					}</style><style>.fi{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style></head><body class="page-template"><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://www.shoib.me/"><img src="https://www.shoib.me/media/website/icons8-swot-analysis-400.png" alt="Shoib&#x27;s Space" width="400" height="400"></a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Pages</span><ul class="navbar__submenu level-2" aria-hidden="true"><li class="has-submenu"><a href="https://www.shoib.me/blog-and-insights/" target="_self" aria-haspopup="true">Blog</a><ul class="navbar__submenu level-3" aria-hidden="true"><li class="has-submenu"><a href="https://www.shoib.me/projects-and-case-studies/" target="_self" aria-haspopup="true">Projects &amp; Case Studies</a><ul class="navbar__submenu level-4" aria-hidden="true"><li><a href="https://www.shoib.me/services-and-solutions/" target="_self">Services &amp; Solutions</a></li></ul></li></ul></li></ul></li><li><a href="https://www.shoib.me/advanced-lunar-month-calculator/" target="_self">Advanced Lunar Month Calculator</a></li><li class="active"><a href="https://www.shoib.me/quran-explorer/" target="_self">üìñ Quran Explorer</a></li></ul></nav></header><main class="content page"><article class="post"><header><h1 class="post__title">üìñ Quran Explorer</h1></header><div class="post__entry"><div class="container"><h2>üìñ Quran Explorer</h2><div><label for="surah">üìú Select Surah:</label><select id="surah"></select></div><div><label for="ayah">üî¢ Select Ayah:</label><select id="ayah"></select></div><div><label for="translation-select">üáπüá∑ Select Translation:</label><select id="translation-select"></select></div><div style="margin-top: 15px;"><button id="show-ayah-btn">üìñ Show Ayah</button> <button id="show-full-surah-btn">üìú Show Full Surah</button></div><hr style="margin-top: 25px; margin-bottom: 25px;"><div><label for="keyword-input">üîç Search Keyword:</label> <input id="keyword-input" type="text" placeholder="e.g., Mercy, ÿ±ÿ≠ŸÖŸÜ"> <button id="search-keyword-btn" style="margin-left: 5px;">Search</button></div><div id="quran-container" style="margin-top: 25px;"><p class="message">Please select a Surah to begin. Default translation is Sahih International.</p></div></div><p><script>const surahSelect = document.getElementById("surah");
    const ayahSelect = document.getElementById("ayah");
    const translationSelect = document.getElementById("translation-select");
    const quranContainer = document.getElementById("quran-container");
    const showAyahButton = document.getElementById("show-ayah-btn");
    const showFullSurahButton = document.getElementById("show-full-surah-btn");
    const keywordInput = document.getElementById("keyword-input");
    const searchKeywordButton = document.getElementById("search-keyword-btn");

    const API_BASE_URL = "https://api.alquran.cloud/v1";
    let currentDisplayMode = 'none'; // Can be 'none', 'surah', or 'ayah'

    function setControlsDisabled(disabled) {
        surahSelect.disabled = disabled;
        ayahSelect.disabled = disabled;
        translationSelect.disabled = disabled;
        showAyahButton.disabled = disabled;
        showFullSurahButton.disabled = disabled;
        keywordInput.disabled = disabled;
        searchKeywordButton.disabled = disabled;
    }

    function showLoadingMessage(message) {
        quranContainer.innerHTML = `<p class="message">${message}</p>`;
    }

    function showErrorMessage(message) {
        quranContainer.innerHTML = `<p class="message error-message">Error: ${message}</p>`;
    }

    async function populateAyahDropdownForSurah(surahNumber) {
        ayahSelect.disabled = true;
        ayahSelect.innerHTML = '<option value="">Loading Ayahs...</option>';
        try {
            const response = await fetch(`${API_BASE_URL}/surah/${surahNumber}`);
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Fetching Ayah list: ${response.status} ${response.statusText}. ${errorData.data || ''}`);
            }
            const data = await response.json();
            ayahSelect.innerHTML = ""; // Clear "Loading Ayahs..."
            if (data.data && data.data.numberOfAyahs) {
                for (let i = 1; i <= data.data.numberOfAyahs; i++) {
                    const option = document.createElement("option");
                    option.value = i;
                    option.textContent = `Ayah ${i}`;
                    ayahSelect.appendChild(option);
                }
            } else {
                ayahSelect.innerHTML = '<option value="">No Ayahs</option>';
            }
        } catch (error) {
            console.error(`Error loading Ayahs for Surah ${surahNumber}:`, error);
            ayahSelect.innerHTML = '<option value="">Error loading</option>';
        } finally {
            ayahSelect.disabled = false;
        }
    }

    async function populateTranslationSelect() {
        translationSelect.disabled = true;
        translationSelect.innerHTML = '<option value="">Loading Translations...</option>';
        try {
            const response = await fetch(`${API_BASE_URL}/edition?format=text&type=translation`);
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Fetching translations: ${response.status} ${response.statusText}. ${errorData.data || ''}`);
            }
            const data = await response.json();
            translationSelect.innerHTML = ""; // Clear loading message

            if (data.data && data.data.length > 0) {
                data.data.forEach(edition => {
                    const option = document.createElement("option");
                    option.value = edition.identifier;
                    option.textContent = `${edition.englishName || edition.name} (${edition.language.toUpperCase()})`;
                    translationSelect.appendChild(option);
                });

                // Set a default translation
                const defaultTranslationId = 'en.sahih';
                const defaultOption = data.data.find(e => e.identifier === defaultTranslationId);
                if (defaultOption) {
                    translationSelect.value = defaultTranslationId;
                } else {
                    const firstEnOption = data.data.find(e => e.language === 'en');
                    if (firstEnOption) {
                        translationSelect.value = firstEnOption.identifier;
                    } else if (data.data.length > 0) {
                        translationSelect.value = data.data[0].identifier; // Fallback to the very first one
                    }
                }
            } else {
                translationSelect.innerHTML = '<option value="">No Translations Found</option>';
            }
        } catch (error) {
            console.error("Error populating translations:", error);
            translationSelect.innerHTML = '<option value="">Error loading</option>';
            showErrorMessage("Could not load translations. " + error.message);
        } finally {
            translationSelect.disabled = false;
        }
    }

    async function displaySingleAyah() {
        const surahNumber = surahSelect.value;
        const ayahNumberInSurah = ayahSelect.value;
        const selectedTranslationId = translationSelect.value;

        if (!surahNumber || !ayahNumberInSurah) {
            showErrorMessage("Please select a Surah and an Ayah number.");
            return;
        }
        if (!selectedTranslationId) {
            showErrorMessage("Please select a Translation.");
            return;
        }

        setControlsDisabled(true);
        showLoadingMessage(`Loading Ayah ${surahNumber}:${ayahNumberInSurah}...`);
        currentDisplayMode = 'ayah';
        try {
            const editionsToFetch = `quran-uthmani,${selectedTranslationId}`;
            const response = await fetch(`${API_BASE_URL}/ayah/${surahNumber}:${ayahNumberInSurah}/editions/${editionsToFetch}`);

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Fetching Ayah: ${response.status} ${response.statusText}. ${errorData.data || 'Selected translation might be unavailable.'}`);
            }
            const data = await response.json();
            const ayahDataArray = data.data;

            const arabicAyah = ayahDataArray.find(a => a.edition.identifier === 'quran-uthmani');
            const translatedAyah = ayahDataArray.find(a => a.edition.identifier === selectedTranslationId);

            if (!arabicAyah) {
                throw new Error("Arabic text for the Ayah not found in the API response.");
            }

            quranContainer.innerHTML = `
                <div class="surah-title">
                    <h3>${arabicAyah.surah.name} (${arabicAyah.surah.englishName})</h3>
                    <p>${arabicAyah.surah.englishNameTranslation}</p>
                </div>
                <div class="ayah">
                    <p class="ayah-number">ÿßŸÑÿ¢Ÿäÿ© ${arabicAyah.numberInSurah} (Ayah ${arabicAyah.numberInSurah})</p>
                    <p class="arabic-text">${arabicAyah.text}</p>
                    ${translatedAyah ? `
                        <p class="translation-text">${translatedAyah.text}</p>
                        <p class="translation-credit">(Translation: ${translatedAyah.edition.englishName || translatedAyah.edition.name})</p>
                    ` : `<p class="translation-text error-message" style="font-size:0.9em; padding:5px;">Selected translation not available for this Ayah.</p>`}
                </div>
            `;
        } catch (error) {
            console.error("Error fetching Ayah:", error);
            showErrorMessage(error.message || "Failed to fetch the Ayah.");
        } finally {
            setControlsDisabled(false);
        }
    }

    async function displayFullSurah() {
        const surahNumber = surahSelect.value;
        const selectedTranslationId = translationSelect.value;

        if (!surahNumber) {
            showErrorMessage("Please select a Surah.");
            return;
        }
         if (!selectedTranslationId) {
            showErrorMessage("Please select a Translation.");
            return;
        }

        setControlsDisabled(true);
        showLoadingMessage(`Loading Surah ${surahNumber} with selected translation...`);
        currentDisplayMode = 'surah';
        try {
            const editionsToFetch = `quran-uthmani,${selectedTranslationId}`;
            const response = await fetch(`${API_BASE_URL}/surah/${surahNumber}/editions/${editionsToFetch}`);

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Fetching Surah: ${response.status} ${response.statusText}. ${errorData.data || 'Selected translation might be unavailable for the full Surah.'}`);
            }
            const data = await response.json();
            const surahEditionsData = data.data;

            const arabicSurah = surahEditionsData.find(s => s.edition.identifier === 'quran-uthmani');
            const translatedSurah = surahEditionsData.find(s => s.edition.identifier === selectedTranslationId);

            if (!arabicSurah) {
                 throw new Error("Arabic text for the Surah not found in the API response.");
            }

            let ayahsHtml = arabicSurah.ayahs.map((ayah, index) => {
                const translationText = translatedSurah && translatedSurah.ayahs[index] ? translatedSurah.ayahs[index].text : "Selected translation not available for this Ayah.";
                const translationAvailable = translatedSurah && translatedSurah.ayahs[index];
                return `
                    <div class="ayah">
                        <p class="ayah-number">ÿßŸÑÿ¢Ÿäÿ© ${ayah.numberInSurah} (Ayah ${ayah.numberInSurah})</p>
                        <p class="arabic-text">${ayah.text}</p>
                        <p class="translation-text ${!translationAvailable ? 'error-message' : ''}" style="${!translationAvailable ? 'font-size:0.9em; padding:5px;' : ''}">${translationText}</p>
                    </div>`;
            }).join('');

            quranContainer.innerHTML = `
                <div class="surah-title">
                    <h3>${arabicSurah.name} (${arabicSurah.englishName})</h3>
                    <p><em>${arabicSurah.englishNameTranslation}</em></p>
                    <p>Number of Ayahs: ${arabicSurah.numberOfAyahs} | Revelation Type: ${arabicSurah.revelationType}</p>
                    ${translatedSurah ? `<p class="translation-credit" style="text-align:left;">(Displaying Translation: ${translatedSurah.edition.englishName || translatedSurah.edition.name})</p>` : ''}
                </div>
                ${ayahsHtml}
            `;
        } catch (error) {
            console.error("Error fetching full Surah:", error);
            showErrorMessage(error.message || "Failed to fetch the full Surah.");
        } finally {
            setControlsDisabled(false);
        }
    }
    
    async function handleSurahChange() {
        setControlsDisabled(true); // Disable all controls at the start
        const surahNumber = surahSelect.value;
        if (surahNumber) {
            quranContainer.innerHTML = ''; // Clear previous content immediately
            showLoadingMessage(`Loading Surah ${surahNumber} details...`);
            await populateAyahDropdownForSurah(surahNumber); // This enables ayahSelect itself
            await displayFullSurah(); // This will manage its own loading message and re-enable all controls
        } else {
            quranContainer.innerHTML = '<p class="message">Please select a Surah to display.</p>';
            ayahSelect.innerHTML = '<option value="">Select Ayah</option>';
            currentDisplayMode = 'none';
            setControlsDisabled(false); // Re-enable controls if no surah is selected
        }
    }

    async function handleTranslationChange() {
        const surahNumber = surahSelect.value;
        if (!surahNumber && currentDisplayMode === 'none') {
            // If no surah was ever loaded, just note the translation changed.
            // User will need to select a surah.
             const selectedTranslationInfo = translationSelect.options[translationSelect.selectedIndex]?.text || "selected translation";
             quranContainer.innerHTML = `<p class="message">Translation set to ${selectedTranslationInfo}. Please select a Surah to display.</p>`;
            return;
        }

        if (currentDisplayMode === 'ayah' && surahSelect.value && ayahSelect.value) {
            await displaySingleAyah();
        } else if (currentDisplayMode === 'surah' && surahSelect.value) {
            await displayFullSurah();
        } else if (surahSelect.value) { // Fallback if mode is 'none' but a surah is selected
             await displayFullSurah();
        }
    }

    async function initializeQuranExplorer() {
        setControlsDisabled(true);
        showLoadingMessage("Initializing Quran Explorer...");
        
        // Add default "Select" options
        surahSelect.innerHTML = '<option value="">Select Surah</option>';
        ayahSelect.innerHTML = '<option value="">Select Ayah</option>';
        translationSelect.innerHTML = '<option value="">Select Translation</option>';

        try {
            await populateTranslationSelect(); // Populate translations first

            const response = await fetch(`${API_BASE_URL}/surah`);
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(`Fetching Surah list: ${response.status} ${response.statusText}. ${errorData.data || ''}`);
            }
            const data = await response.json();

            // surahSelect.innerHTML = ""; // Clear loading/default, already did
            if (data.data && data.data.length > 0) {
                 const placeholderOption = document.createElement("option");
                 placeholderOption.value = "";
                 placeholderOption.textContent = "--- Select a Surah ---";
                 surahSelect.appendChild(placeholderOption);

                data.data.forEach(surah => {
                    const option = document.createElement("option");
                    option.value = surah.number;
                    option.textContent = `${surah.number}. ${surah.name} (${surah.englishName})`;
                    surahSelect.appendChild(option);
                });
                const initialMessage = translationSelect.options.length > 1 && translationSelect.value ?
                    `Please select a Surah to begin. Default translation: ${translationSelect.options[translationSelect.selectedIndex].text}.` :
                    "Please select a Surah and Translation to begin.";
                quranContainer.innerHTML = `<p class="message">${initialMessage}</p>`;

            } else {
                showErrorMessage("No Surahs found in the API response.");
            }
        } catch (error) {
            console.error("Initialization Error:", error);
            showErrorMessage(error.message || "Failed to initialize the Quran Explorer.");
        } finally {
            setControlsDisabled(false);
        }
    }

    async function searchByKeyword() {
        const keyword = keywordInput.value.trim();
        if (!keyword) {
            showErrorMessage("Please enter a keyword to search.");
            return;
        }

        setControlsDisabled(true);
        showLoadingMessage(`Searching for "${keyword}"...`);
        quranContainer.innerHTML = ''; 

        const editionsToSearch = [
            { id: 'en.sahih', name: 'Sahih International (English)', lang: 'en', dir: 'ltr' },
            { id: 'quran-uthmani', name: 'Uthmani Script (Arabic)', lang: 'ar', dir: 'rtl' }
        ];

        let allMatches = [];
        let foundResultsOverall = false;

        try {
            for (const edition of editionsToSearch) {
                try {
                    const response = await fetch(`${API_BASE_URL}/search/${encodeURIComponent(keyword)}/all/${edition.id}`);
                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({ message: "Unknown API error format" }));
                        console.warn(`Warning searching for "${keyword}" in ${edition.name}: ${response.status} ${response.statusText}. API Message: ${errorData.data || errorData.message}`);
                        continue; 
                    }
                    const data = await response.json();
                    if (data.code === 200 && data.data && data.data.matches && data.data.matches.length > 0) {
                        foundResultsOverall = true;
                        const matchesWithEditionInfo = data.data.matches.map(match => ({
                            ...match,
                            searchedEditionName: edition.name,
                            searchedEditionLang: edition.lang,
                            searchedEditionDir: edition.dir
                        }));
                        allMatches.push(...matchesWithEditionInfo);
                    }
                } catch (fetchError) {
                    console.warn(`Error fetching search results for "${keyword}" in ${edition.name}:`, fetchError);
                }
            }

            if (!foundResultsOverall || allMatches.length === 0) {
                quranContainer.innerHTML = `<p class="message">No results found for "${keyword}". Try different terms or check spelling.</p>`;
            } else {
                allMatches.sort((a, b) => {
                    if (a.surah.number !== b.surah.number) {
                        return a.surah.number - b.surah.number;
                    }
                    return a.numberInSurah - b.numberInSurah;
                });

                let resultsHtml = `<h2 style="margin-bottom:15px; text-align:left; font-size:1.5em;">Search Results for "${keyword}" (${allMatches.length} matches):</h2>`;
                resultsHtml += allMatches.map(match => `
                    <div class="search-result-item">
                        <p class="surah-info">
                            Surah ${match.surah.number}: ${match.surah.englishName} ( ${match.surah.name} ) - Ayah ${match.numberInSurah}
                        </p>
                        <div class="matched-text-edition">
                            <p><em>Matched in ${match.searchedEditionName}:</em></p>
                            <p class="ayah-text-search" lang="${match.searchedEditionLang}" dir="${match.searchedEditionDir}">${match.text}</p>
                        </div>
                        ${allMatches.length > 1 ? '<hr>' : ''}
                    </div>
                `).join('');
                quranContainer.innerHTML = resultsHtml;
            }
        } catch (error) { 
            console.error("Error during keyword search process:", error);
            showErrorMessage(error.message || "Failed to perform keyword search due to an unexpected issue.");
        } finally {
            setControlsDisabled(false);
        }
    }

    // Event Listeners
    surahSelect.addEventListener("change", handleSurahChange);
    ayahSelect.addEventListener("change", displaySingleAyah); // Also show single ayah on direct ayah selection
    translationSelect.addEventListener("change", handleTranslationChange);
    showAyahButton.addEventListener("click", displaySingleAyah);
    showFullSurahButton.addEventListener("click", displayFullSurah);
    searchKeywordButton.addEventListener("click", searchByKeyword);

    // Initial Load
    initializeQuranExplorer();</script></p></div></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p><span style="color: #2dc26b;">¬© 2025 All rights reserved. This website and its content are the property of the owner</span></p></div></div></footer></div><script defer="defer" src="https://www.shoib.me/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'overlay',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script>(function() {
			var originalTitle = document.title;
			var timeout;
			document.addEventListener("visibilitychange", function() {
				if (document.hidden) {
					document.title = "üëÄ We miss you! Plz Come back!";
				} else {
					clearTimeout(timeout);
					document.title = "üéâ Welcome back!";
							setTimeout(function() {
								document.title = originalTitle;
							}, 2000);
				}
			});
		})();</script></body></html>